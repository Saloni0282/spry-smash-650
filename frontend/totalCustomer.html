<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" 
  rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
    <title>Document</title>
    <style>
    body{
        background: #1d2630;
    }
    *{
        color:#fff;
    }
    h1{
        color: crimson;
        text-align: center;
    }
    #Update{
        display: none;
    }
</style>
</head>
<body>
    <div class="container">
    <u><h1>Total Customer</h1></u>
                
            <div class="row mt-5">
                <div class="col-12">
                    <table class="table table-bordered" id="crudTable">
                        <thead>
                            <tr>
                                <th>NAME</th>
                                
                                <th>Email</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="append">
                            <tr>
                                <!-- <td>Saloni</td>
                                <td>saloni@gmail.com</td>
                                <td>Delete</td> -->
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
</body>
</html>

<script>

    let tbody=document.getElementById("append");

    async function update(){

            let res= await fetch("http://localhost:8080/user/get")
            let data=await res.json();
            display(data);
            console.log(data);
    }

    update();
    
    function display(data) {

        data.forEach(element=>{

            let tr= document.createElement("tr");
            let td=document.createElement("td");
            let td1=document.createElement("td");
            let td3=document.createElement("td");

            td.innerHTML=element.name;
            td1.innerHTML=element.email;
            td3.innerHTML="Delete";

            tr.append(td,td1,td3);
            tbody.append(tr);
        })
    }
    











    // let tbody=document.getElementById("append");
    // let button=document.getElementById("submit");

    // async function update(){

    //         let res= await fetch("http://localhost:8080/user/get")
    //         let data=await res.json();
    //         display(data);
    //         console.log(data);
    // }

    // update();
    
    
    // function display(data) {

    //     data.forEach(element=>{

    //         let tr= document.createElement("tr");
    //         let td=document.createElement("td");
    //         let td1=document.createElement("td");
    //         let td3=document.createElement("button");

    //         td.innerHTML=element.name;
    //         td1.innerHTML=element.email;
    //         td3.innerHTML="Delete";
    //         td3.addEventListener("click",()=>{
    //                  async function dlt (data){
    //         console.log(data)
    //         try{
    //             let res=await fetch("http://localhost:8080/user/delete/:id",{
    //                 method:"DELETE",
    //                 body:JSON.stringify(data),
    //                 headers:{"Content-type":"application/json"}

    //             }).then(res=>res.json())
    //     .then(res=>{
    //         console.log(res)
    //         localStorage.setItem("token",res.token)
    //     })
                
    //         }catch(err){
    //             console.log(err)
    //         }
    //     }
    //      dlt();
    //      console.log('buttons clicked');
         
    //         })

    //         tr.append(td,td1,td3);
    //         tbody.append(tr);
    //     })
    // }
    
</script>